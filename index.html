<html lang="en" data-bs-theme="light">
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous">
    <script type="application/javascript" src="/js/websocket.js"></script>
    <script type="application/javascript" src="/js/main.js"></script>
    <script type="application/javascript" src="/js/jog.js"></script>
    <link href="css/style.css" rel="stylesheet">

</head>

<body>

<!--<nav class="navbar navbar-expand-lg navbar-light bg-light">-->
<!--    <div class="container-fluid">-->
<!--        <a class="navbar-brand" href="#">WebNC</a>-->
<!--        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"-->
<!--                aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">-->
<!--            <span class="navbar-toggler-icon"></span>-->
<!--        </button>-->
<!--        <div class="collapse navbar-collapse" id="navbarNav">-->
<!--            <ul class="navbar-nav">-->
<!--                <li class="nav-item">-->
<!--                    <a class="nav-link active" aria-current="page" href="#">HMI</a>-->
<!--                </li>-->
<!--                <li class="nav-item">-->
<!--                    <a class="nav-link" href="#">Features</a>-->
<!--                </li>-->
<!--                <li class="nav-item">-->
<!--                    <a class="nav-link" href="#">Pricing</a>-->
<!--                </li>-->
<!--                <li class="nav-item">-->
<!--                    <a class="nav-link disabled" href="#" tabindex="-1" aria-disabled="true">Disabled</a>-->
<!--                </li>-->
<!--            </ul>-->
<!--        </div>-->
<!--    </div>-->
<!--</nav>-->

<div class="container">
    <div class="row align-items-start">
    <div class="col">

        <div class="card mb-3" style="min-width: 650px; ">

            <div class="row g-0">
                <div class="col-3 p-3" style="min-width: 450px; ">

                    <span class="btns">
                        <button type="button" class="btn btn-primary btn-lg homebtn"
                                onclick="homing(this, 'X')">X</button>
                        <button type="button" class="btn btn-primary btn-lg homebtn rightposition"
                                onclick="homing(this, 'Y')">Y</button>
                    </span>

                    <div id="jog" class="circle0 shadow">
                        <a href="#" class="stretched-link" style="cursor: crosshair;"></a>
                        <div class="linev"></div>
                        <div class="lineh"></div>
                        <div class="circle1 shadow border2">
                            <div class="circle2 shadow border2">
                                <div class="circle3 shadow border2"></div>
                            </div>
                        </div>
                        <span class="btns btm">
                            <button type="button" class="btn btn-primary btn-lg homebtn"
                                    onclick="homing(this, '')">H</button>
                            <button type="button" class="btn btn-primary btn-lg homebtn rightposition"
                                    onclick="homing(this, 'Y')">Z</button>
                        </span>

                    </div> <!--/jog-->
                    <br/>

                </div>

                <div class="col-2 p-3">

                    <div class="btn-group-justified btn-group-md btn-group-vertical">

                        <button type="button" class="btn btn-secondary" onclick="sendCommand2(this, 5, 'Z')">5</button>
                        <button type="button" class="btn btn-secondary" onclick="sendCommand2(this, 1, 'Z')">1</button>
                        <button type="button" class="btn btn-secondary" onclick="sendCommand2(this, 0.1, 'Z')">.1
                        </button>
                        <button type="button" class="btn btn-outline-secondary">Z</button>
                        <button type="button" class="btn btn-secondary" onclick="sendCommand2(this, -0.1, 'Z')">-.1
                        </button>
                        <button type="button" class="btn btn-secondary" onclick="sendCommand2(this, -1, 'Z')">-1
                        </button>
                        <button type="button" class="btn btn-secondary" onclick="sendCommand2(this, -5, 'Z')">-5
                        </button>

                        <input id="jog_help" class="form-control" type="text" value="" aria-label="example" readonly>
                    </div>
                </div>
            </div>
            <div class="row p-3">
                <div class="col-2">WPos</div>
                <div class="col">
                    <div class="input-group">
                        <div class="input-group-text">X</div>
                        <input id="x_val" class="form-control" type="text" value="" aria-label="X" readonly>
                    </div>
                </div>
                <div class="col">
                    <div class="input-group">
                        <div class="input-group-text">Y</div>
                        <input id="y_val" class="form-control" type="text" value="" aria-label="X" readonly>
                    </div>
                </div>
                <div class="col">
                    <div class="input-group">
                        <div class="input-group-text">Z</div>
                        <input id="z_val" class="form-control" type="text" value="" aria-label="X" readonly>
                    </div>
                </div>
            </div>

            <div class="row p-3">
                <div class="col-2">MPos</div>
                <div class="col">
                    <div class="input-group">
                        <div class="input-group-text">X</div>
                        <input id="x_val_m" class="form-control" type="text" value="" aria-label="X" readonly>
                    </div>
                </div>
                <div class="col">
                    <div class="input-group">
                        <div class="input-group-text">Y</div>
                        <input id="y_val_m" class="form-control" type="text" value="" aria-label="X" readonly>
                    </div>
                </div>
                <div class="col">
                    <div class="input-group">
                        <div class="input-group-text">Z</div>
                        <input id="z_val_m" class="form-control" type="text" value="" aria-label="X" readonly>
                    </div>
                </div>
            </div>

        </div> <!--/card-->

        <div class="card mb-3">
            <div class="card-header">
                Commands
            </div>
            <div class="card-body">
                <form class="form-inline">
                    <div class="input-group ">
                        <input class="form-control" type="text" placeholder="command input" id="command_msg"
                               aria-label="send command">
                        <button class="btn btn-primary" id="command_msg_btn" type="submit" onclick="sendCommand()">
                            Send
                        </button>
                    </div>
                </form>

            </div><!-- /card-body-->
        </div> <!-- /card-->

        <div class="card mb-3">
            <div class="card-header">
                Log
            </div>
            <div class="card-body">
                <div class="outline">

                    <textarea class="form-control" id="log_textArea" rows="8"></textarea>
                </div>

            </div><!-- /card-body-->
        </div> <!-- /card-->


    </div> <!--/coll-->

    <div class="col">
                <div class="card ">
            <div class="card-header">
                Status
            </div>
            <div class="card-body">
                <div class="alert alert-danger" id="ws_status" role="alert">
                      Websocket
                </div>
            </div>
        </div>
    </div>
    </div>
</div>

<script>

    document.getElementById('jog').onclick = function(e) {
          // e = Mouse click event.
          if (e.target.tagName == "A") {

              var rect = e.target.getBoundingClientRect();
              console.log(rect.top, rect.left);
              var x = e.clientX - rect.left ; //x position within the element.
              var y = e.clientY - rect.top -9;  //y position within the element.
              var p =  getCirclePart(x,y);
              console.log(p);
        }
    }

        document.getElementById('jog').onmousemove = function(e) {
          // e = Mouse click event.
          if (e.target.tagName == "A") {
              var rect = e.target.getBoundingClientRect();
              var x = e.clientX - rect.left ; //x position within the element.
              var y = e.clientY - rect.top -9;  //y position within the element.
              var p =  getCirclePart(x,y);
              if (typeof p !== 'undefined') {
                document.getElementById('jog_help').value = p;
              }
              if (typeof p == 'undefined') {
                document.getElementById('jog_help').value = '';
              }
        }
    }





</script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-ENjdO4Dr2bkBIFxQpeoTz1HIcje39Wm4jDKdf19U8gI4ddQ3GYNS7NTKfAdVQSZe"
        crossorigin="anonymous"></script>

<script type="application/javascript" src="/js/commands.js"></script>
<script type="application/javascript" src="/js/status.js"></script>

</body>
</html>
